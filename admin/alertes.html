<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alertes - Malaw Security</title>

  <!-- Polices et styles partag√©s -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="admin.css"> 

  <style>
    .admin-container {
      display: flex;
      min-height: 100vh;
      background-color: #001b2e;
      color: white;
      font-family: "Poppins", sans-serif;
    }

    .main-content {
      flex: 1;
      padding: 40px;
      overflow-x: auto;
    }

    h1 {
      font-family: "Orbitron", sans-serif;
      color: #b8d9ff;
      margin-bottom: 25px;
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
    }

    th, td {
      padding: 14px 18px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    th {
      background: rgba(0, 90, 130, 0.5);
      color: #b8d9ff;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    tr:nth-child(even) {
      background: rgba(255, 255, 255, 0.04);
    }

    .status {
      padding: 6px 12px;
      border-radius: 8px;
      font-weight: bold;
      color: white;
    }

    .status.new { background: #2196f3; }
    .status.pending { background: #ff9800; }
    .status.resolved { background: #4caf50; }

    @media (max-width: 768px) {
      th, td { font-size: 13px; padding: 10px; }
    }
  </style>
</head>
<body>

  <div class="admin-container">
    <aside class="sidebar">
      <div class="logo-container">
        <img src="logopetit.png" alt="Logo Malaw Security" class="logo">
      </div>

      <div class="datetime">
        <div id="date"></div>
        <div id="time"></div>
      </div>

      <nav>
        <ul>
          <li><a href="heatmap.html"><img src="icons/sn.png" alt="Heatmap Icon">Accueil</a></li>
          <li><a href="alertes.html"><img src="icons/alert.png" alt="Alertes Icon">Alertes</a></li>
          <li><a href="stats.html"><img src="icons/stats.png" alt="Stats Icon">Stats</a></li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <h1>üö® Alertes r√©centes</h1>

      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Localisation</th>
            <th>Description</th>
            <th>Statut</th>
          </tr>
        </thead>
        <tbody id="alertesBody"></tbody>
      </table>
    </main>
  </div>

<script>
  function updateDateTime() {
    const now = new Date();
    document.getElementById("date").textContent = now.toLocaleDateString("fr-FR");
    document.getElementById("time").textContent = now.toLocaleTimeString("fr-FR");
  }
  setInterval(updateDateTime, 1000);
  updateDateTime();

  const tbody = document.getElementById("alertesBody");

  // ‚úÖ Liste d‚Äôalertes locales
  const alertesLocales = [
 { date: "09/10/2025 08:12:45", localisation: "R√©gion de Dakar", description: "Tentative de vol de donn√©es bancaires via faux lien Orange Money", statut: "Nouveau", categorie: "Phishing" },
  { date: "09/10/2025 08:14:30", localisation: "R√©gion de Saint-Louis", description: "Faux message d‚Äôaide financi√®re diffus√© sur WhatsApp", statut: "En cours", categorie: "Escroquerie" },
  { date: "09/10/2025 09:05:12", localisation: "R√©gion de Dakar", description: "Lien frauduleux promettant un bonus Wave", statut: "R√©solu", categorie: "Spam SMS" },
  { date: "08/10/2025", localisation: "R√©gion de Dakar", description: "Tentative de phishing via message Wave 'Compte suspendu'", statut: "En cours", categorie: "Phishing" },
  { date: "08/10/2025", localisation: "R√©gion de Thi√®s", description: "Faux concours ‚ÄòGagnez un iPhone 17 Pro‚Äô sur WhatsApp", statut: "Nouveau", categorie: "Escroquerie" },
  { date: "07/10/2025", localisation: "R√©gion de Kaolack", description: "Lien frauduleux imitant Free S√©n√©gal", statut: "R√©solu", categorie: "Phishing" },
  { date: "07/10/2025", localisation: "R√©gion de Dakar", description: "Faux agent demandant un code Orange Money", statut: "En cours", categorie: "Vishing" },
  { date: "06/10/2025", localisation: "R√©gion de Saint-Louis", description: "Campagne de phishing sur Facebook 'Wave Assistance'", statut: "Nouveau", categorie: "Phishing" },
  { date: "06/10/2025", localisation: "R√©gion de Ziguinchor", description: "SMS pr√©tendant offrir 100 000 FCFA de cr√©dit", statut: "R√©solu", categorie: "Spam SMS" },
  { date: "06/10/2025", localisation: "R√©gion de Dakar", description: "Escroquerie via faux compte WhatsApp de la SENELEC", statut: "Nouveau", categorie: "Escroquerie" },
  { date: "05/10/2025", localisation: "R√©gion de Louga", description: "Message frauduleux ‚ÄòMise √† jour de votre compte bancaire‚Äô", statut: "En cours", categorie: "Phishing" },
  { date: "05/10/2025", localisation: "R√©gion de Thi√®s", description: "Tentative de vol de code Wave via lien raccourci", statut: "R√©solu", categorie: "Phishing" },
  { date: "05/10/2025", localisation: "R√©gion de Fatick", description: "Faux message d‚Äôaide humanitaire demandant des frais", statut: "En cours", categorie: "Escroquerie" },
  { date: "04/10/2025", localisation: "R√©gion de Dakar", description: "Lien suspect imitant le site de la Poste", statut: "Nouveau", categorie: "Phishing" },
  { date: "04/10/2025", localisation: "R√©gion de Kolda", description: "Faux appel demandant de confirmer un transfert Orange Money", statut: "R√©solu", categorie: "Vishing" },
  { date: "03/10/2025", localisation: "R√©gion de Diourbel", description: "Arnaque via message Messenger ‚ÄòAide du gouvernement‚Äô", statut: "En cours", categorie: "Escroquerie" },
  { date: "03/10/2025", localisation: "R√©gion de Thi√®s", description: "Escroquerie via faux profil d‚Äôagence de voyage", statut: "Nouveau", categorie: "Fraude √† la livraison" },
  { date: "03/10/2025", localisation: "R√©gion de Dakar", description: "Campagne d‚Äôhame√ßonnage ciblant les utilisateurs Wave", statut: "R√©solu", categorie: "Phishing" },
  { date: "02/10/2025", localisation: "R√©gion de Tambacounda", description: "Lien malveillant diffus√© sur groupe WhatsApp ‚ÄòAide financi√®re‚Äô", statut: "En cours", categorie: "Spam SMS" },
  { date: "02/10/2025", localisation: "R√©gion de Saint-Louis", description: "Faux message annon√ßant un bonus Orange Money", statut: "Nouveau", categorie: "Phishing" },
  { date: "02/10/2025", localisation: "R√©gion de Dakar", description: "Fausse application mobile ‚ÄòWave Secure‚Äô d√©tect√©e", statut: "R√©solu", categorie: "Cyberattaque" },
  { date: "01/10/2025", localisation: "R√©gion de Fatick", description: "Tentative d‚Äôescroquerie via SMS 'Cr√©dit gratuit Sonatel'", statut: "En cours", categorie: "Spam SMS" },
  { date: "01/10/2025", localisation: "R√©gion de Thi√®s", description: "Page web trompeuse imitant Wave Business", statut: "En cours", categorie: "Phishing" },
  { date: "30/09/2025", localisation: "R√©gion de Dakar", description: "Faux service client demandant une v√©rification d‚Äôidentit√©", statut: "Nouveau", categorie: "Vishing" },
  { date: "30/09/2025", localisation: "R√©gion de Kaolack", description: "Arnaque ‚ÄòInvestissement rapide‚Äô par Telegram", statut: "R√©solu", categorie: "Escroquerie" },
  { date: "29/09/2025", localisation: "R√©gion de Louga", description: "Lien frauduleux promettant un bonus internet", statut: "En cours", categorie: "Phishing" },
  { date: "29/09/2025", localisation: "R√©gion de Dakar", description: "Tentative d‚Äôhame√ßonnage sur Messenger ‚ÄòGagne ton cr√©dit‚Äô", statut: "R√©solu", categorie: "Phishing" },
  { date: "28/09/2025", localisation: "R√©gion de Diourbel", description: "Fausse publicit√© ‚ÄòWave double ton argent‚Äô", statut: "En cours", categorie: "Escroquerie" },
  { date: "28/09/2025", localisation: "R√©gion de Ziguinchor", description: "Faux message sur tirage Wave hebdomadaire", statut: "Nouveau", categorie: "Spam SMS" },
  { date: "27/09/2025", localisation: "R√©gion de Dakar", description: "Campagne d‚Äôarnaque ciblant les vendeurs Jumia", statut: "En cours", categorie: "Fraude √† la livraison" },
  { date: "26/09/2025", localisation: "R√©gion de Thi√®s", description: "Lien suspect redirigeant vers une fausse app Orange", statut: "R√©solu", categorie: "Phishing" },
  { date: "26/09/2025", localisation: "R√©gion de Kolda", description: "Escroquerie par SMS annon√ßant un gain Wave", statut: "En cours", categorie: "Spam SMS" },
  { date: "25/09/2025", localisation: "R√©gion de Dakar", description: "Faux message d‚Äôerreur Wave demandant un code", statut: "Nouveau", categorie: "Phishing" },
  { date: "07/10/2025", localisation: "R√©gion de Dakar", description: "Faux message Orange Money", statut: "En cours", categorie: "Phishing" },
  { date: "06/10/2025", localisation: "R√©gion de Thi√®s", description: "Campagne phishing ‚ÄúiPhone 17‚Äù", statut: "R√©solu", categorie: "Phishing" },
  { date: "05/10/2025", localisation: "R√©gion de Kaolack", description: "Arnaque sur livraison Wave", statut: "Nouveau", categorie: "Escroquerie" },
  { date: "09/10/2025 09:22:59", localisation: "R√©gion de Saint-Louis", description: "Tentative de piratage d‚Äôun compte institutionnel", statut: "Nouveau", categorie: "Intrusion" },
  { date: "09/10/2025 10:07:33", localisation: "R√©gion de Dakar", description: "Campagne de mails ‚ÄòAide Tabaski‚Äô contenant un fichier malveillant", statut: "En cours", categorie: "Spam email" },
  { date: "09/10/2025 10:41:10", localisation: "R√©gion de Saint-Louis", description: "Propagation d‚Äôun lien de ran√ßongiciel par email", statut: "R√©solu", categorie: "Ran√ßongiciel" },
  { date: "09/10/2025 11:12:46", localisation: "R√©gion de Dakar", description: "Tentative de phishing via site imitant la SENELEC", statut: "Nouveau", categorie: "Phishing" },
  { date: "09/10/2025 11:35:28", localisation: "R√©gion de Saint-Louis", description: "Email usurpant la Banque Agricole pour collecter des identifiants", statut: "En cours", categorie: "Vol de donn√©es" },
  { date: "09/10/2025 12:00:19", localisation: "R√©gion de Dakar", description: "Campagne d‚Äôappels vocaux frauduleux se faisant passer pour Wave", statut: "R√©solu", categorie: "Vishing" },
  { date: "09/10/2025 12:24:05", localisation: "R√©gion de Saint-Louis", description: "Arnaque √† la livraison via fausse boutique Facebook", statut: "Nouveau", categorie: "Fraude √† la livraison" },
  { date: "09/10/2025 13:08:37", localisation: "R√©gion de Dakar", description: "Intrusion dans un serveur communal non s√©curis√©", statut: "En cours", categorie: "Intrusion" },
  { date: "09/10/2025 13:25:11", localisation: "R√©gion de Saint-Louis", description: "Usurpation d‚Äôidentit√© d‚Äôun agent public sur les r√©seaux sociaux", statut: "R√©solu", categorie: "Escroquerie" },
  { date: "09/10/2025 14:02:55", localisation: "R√©gion de Dakar", description: "Tentative de cyberattaque sur le site d‚Äôune mairie locale", statut: "Nouveau", categorie: "Cyberattaque" },
  { date: "09/10/2025 14:29:48", localisation: "R√©gion de Saint-Louis", description: "Mail contenant un virus de chiffrement", statut: "En cours", categorie: "Ran√ßongiciel" },
  { date: "09/10/2025 15:01:36", localisation: "R√©gion de Dakar", description: "Faux trading crypto sur Telegram visant les jeunes", statut: "R√©solu", categorie: "Escroquerie" },
  { date: "09/10/2025 15:17:02", localisation: "R√©gion de Saint-Louis", description: "Campagne de messages diffusant un lien infect√©", statut: "Nouveau", categorie: "Spam SMS" },
  { date: "09/10/2025 15:45:23", localisation: "R√©gion de Dakar", description: "Acc√®s non autoris√© d√©tect√© sur un serveur universitaire", statut: "En cours", categorie: "Intrusion" },
  { date: "09/10/2025 16:02:41", localisation: "R√©gion de Saint-Louis", description: "Escroquerie en ligne li√©e √† de fausses offres d‚Äôemploi", statut: "R√©solu", categorie: "Escroquerie" },
  { date: "09/10/2025 16:25:57", localisation: "R√©gion de Dakar", description: "Tentative d‚Äôhame√ßonnage ciblant les entreprises locales", statut: "Nouveau", categorie: "Phishing" },
  { date: "09/10/2025 16:48:22", localisation: "R√©gion de Saint-Louis", description: "Ran√ßongiciel bloquant les fichiers d‚Äôune collectivit√© locale", statut: "En cours", categorie: "Ran√ßongiciel" },
  { date: "09/10/2025 17:03:14", localisation: "R√©gion de Dakar", description: "Attaque DDoS sur le portail municipal", statut: "R√©solu", categorie: "Cyberattaque" },
  { date: "09/10/2025 17:21:59", localisation: "R√©gion de Saint-Louis", description: "Faux SMS demandant code de v√©rification bancaire", statut: "Nouveau", categorie: "Spam SMS" },
  { date: "09/10/2025 17:45:30", localisation: "R√©gion de Dakar", description: "Fuite de donn√©es internes d‚Äôun service administratif", statut: "En cours", categorie: "Vol de donn√©es" },
  { date: "09/10/2025 18:06:12", localisation: "R√©gion de Saint-Louis", description: "Campagne de mails frauduleux pr√©tendant venir du Tr√©sor public", statut: "R√©solu", categorie: "Phishing" },
  { date: "09/10/2025 18:28:44", localisation: "R√©gion de Dakar", description: "Appels vocaux promettant un gain Wave pour obtenir un code", statut: "Nouveau", categorie: "Vishing" },
  { date: "09/10/2025 18:49:03", localisation: "R√©gion de Saint-Louis", description: "Tentative d‚Äôusurpation d‚Äôun compte officiel de la mairie", statut: "En cours", categorie: "Intrusion" },
  { date: "09/10/2025 19:12:29", localisation: "R√©gion de Dakar", description: "Arnaque t√©l√©phonique simulant une livraison bloqu√©e", statut: "R√©solu", categorie: "Fraude √† la livraison" },
  { date: "09/10/2025 19:33:18", localisation: "R√©gion de Saint-Louis", description: "Message diffus√© via WhatsApp sur de faux dons alimentaires", statut: "Nouveau", categorie: "Escroquerie" },
  { date: "09/10/2025 19:56:00", localisation: "R√©gion de Dakar", description: "Spam email avec pi√®ce jointe suspecte", statut: "En cours", categorie: "Spam email" },
  { date: "09/10/2025 20:15:27", localisation: "R√©gion de Saint-Louis", description: "Intrusion dans un compte mail institutionnel", statut: "R√©solu", categorie: "Intrusion" },
  { date: "09/10/2025 20:32:58", localisation: "R√©gion de Dakar", description: "Tentative de piratage d‚Äôun site associatif local", statut: "Nouveau", categorie: "Cyberattaque" },
  { date: "09/10/2025 20:49:12", localisation: "R√©gion de Saint-Louis", description: "SMS frauduleux promettant un colis DHL", statut: "En cours", categorie: "Fraude √† la livraison" },
  { date: "09/10/2025 21:03:47", localisation: "R√©gion de Dakar", description: "Diffusion massive d‚Äôun malware par email", statut: "R√©solu", categorie: "Spam email" },
  { date: "09/10/2025 21:24:15", localisation: "R√©gion de Saint-Louis", description: "Fausse alerte s√©curit√© incitant √† t√©l√©charger un fichier", statut: "Nouveau", categorie: "Autre" },
  { date: "09/10/2025 21:46:50", localisation: "R√©gion de Dakar", description: "Vol de donn√©es clients sur une plateforme de e-commerce", statut: "En cours", categorie: "Vol de donn√©es" },
  { date: "09/10/2025 22:02:32", localisation: "R√©gion de Saint-Louis", description: "Spam SMS annon√ßant un gain fictif d‚Äôun concours Wave", statut: "R√©solu", categorie: "Spam SMS" },
  { date: "09/10/2025 22:25:44", localisation: "R√©gion de Dakar", description: "Tentative de piratage sur le r√©seau Wi-Fi public", statut: "Nouveau", categorie: "Intrusion" },
  { date: "09/10/2025 22:46:09", localisation: "R√©gion de Saint-Louis", description: "Faux mail de remboursement PayPal d√©tect√©", statut: "En cours", categorie: "Phishing" },
  { date: "09/10/2025 23:05:23", localisation: "R√©gion de Dakar", description: "Fausse publicit√© promettant des pr√™ts instantan√©s", statut: "R√©solu", categorie: "Escroquerie" }
  ];

  function getStatusClass(statut) {
    switch (statut.toLowerCase()) {
      case "en cours": return "pending";
      case "r√©solu": return "resolved";
      case "nouveau": return "new";
      default: return "new";
    }
  }

  function afficherAlertes(liste) {
    tbody.innerHTML = "";
    liste.forEach(a => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${a.date}</td>
        <td>${a.localisation}</td>
        <td>${a.description}</td>
        <td><span class="status ${getStatusClass(a.statut)}">${a.statut}</span></td>
      `;
      tbody.appendChild(row);
    });
  }

  async function chargerAlertes() {
    try {
      // 1Ô∏è‚É£ R√©cup√©ration depuis le localStorage
      let alertes = JSON.parse(localStorage.getItem("alertes")) || [];

      // 2Ô∏è‚É£ Chargement du fichier alertes.json (facultatif)
      try {
        const response = await fetch("alertes.json");
        if (response.ok) {
          const data = await response.json();
          alertes = [...alertes, ...data];
        }
      } catch {
        console.warn("Aucun fichier alertes.json trouv√© (pas bloquant)");
      }

      // 3Ô∏è‚É£ Fusion avec les alertes locales
      alertes = [...alertes, ...alertesLocales];

      // 4Ô∏è‚É£ Suppression des doublons
      const uniques = alertes.filter(
        (a, i, self) =>
          i === self.findIndex(b => b.date === a.date && b.description === a.description)
      );

      // 5Ô∏è‚É£ Tri par date d√©croissante
      uniques.sort((a, b) =>
        new Date(b.date.replace(/(\d{2})\/(\d{2})\/(\d{4})/, "$2/$1/$3")) -
        new Date(a.date.replace(/(\d{2})\/(\d{2})\/(\d{4})/, "$2/$1/$3"))
      );

      // 6Ô∏è‚É£ Sauvegarde
      localStorage.setItem("alertes", JSON.stringify(uniques));

      // 7Ô∏è‚É£ Affichage
      afficherAlertes(uniques);
    } catch (error) {
      console.error("Erreur :", error);
      afficherAlertes(alertesLocales);
    }
  }

  chargerAlertes();
</script>

</body>
</html>
